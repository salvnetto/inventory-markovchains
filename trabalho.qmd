---
title: "Estoques"
subtitle: "Controle de Estoques Utilizando Cadeias de Markov"
author:
  - Salvador Alves Ferreira Netto (2022040141)
  - Nicolas Monteiro ()
  - Gustavo Aledi ()
abstract: ""
lang: pt
format: 
  pdf:
    toc: true
    fig-pos: "H"
    #toc-title: "Summary"
    toc-depth: 3
    #toc-location: right
    number-sections: true
    number-depth: 3
    documentclass: report
    fig-cap-location: top
    geometry:
      - top=3cm
      - left=3cm
      - right=2cm
      - bottom=2cm
execute:
  echo: false
  warning: false
  output: false
---

```{r}
library(tidyverse)
library(markovchain)
library(igraph)
library(reticulate)
```

```{python}
import pandas as pd
import numpy as np 
```

```{r}
data = read.csv("datasets/data.csv", sep= ",")

set.seed(123)

data = data %>% 
  filter(Open == 1,
         Promo == 0,
         Store == 85) %>% 
  select(-Store, -Open, -Promo, -Customers) %>% 
  mutate(Sales = ceiling(Sales/1000),
         InventoryStart = ceiling(runif(length(Sales), min(Sales), max(Sales))),
         NextDay = lag(sort(DayOfWeek)),
         InventoryFinal = 0) %>% 
  arrange(Date)

data = data[complete.cases(data), ]
```

```{python}
data = r.data

szinho = 5
szao = 16

for i in range(len(data)):
  data.iloc[i, 7] = data.iloc[i, 5] - data.iloc[i, 2]
  if i+1 < len(data):
    if data.iloc[i, 7] <= szinho:
      data.iloc[i+1, 5] = szao
    else:
      data.iloc[i+1, 5] = data.iloc[i, 7]
  
```

```{r}
data = py$data
```

```{r}
table(data$, data$ProximoDia)
```













